(function(){ try {var elementStyle = document.createElement('style'); elementStyle.appendChild(document.createTextNode(".progressive-image{position:relative;overflow:hidden;width:100%;display:inline-block}.progressive-image-canvas{visibility:hidden;position:absolute;top:0;left:0}.progressive-image-main{position:absolute;top:0px;left:0px;width:100%;height:auto;z-index:1;transition-duration:.3s;transition-property:all;transition-timing-function:ease-out;transform:translateZ(0)}.progressive-image-before-enter{opacity:1}.progressive-image-enter{opacity:0}.progressive-image-placeholder{position:absolute;top:0px;left:0px;z-index:0;overflow:hidden;transition-duration:.3s;transition-property:all;transition-timing-function:ease-out;backface-visibility:hidden;transform:translateZ(0) scale(1.1);width:100%;height:100%;background-size:cover}.progressive-image-placeholder-out{transition-duration:inherit;transition-property:all;transition-timing-function:ease-out;transition-delay:.4s;opacity:0}.progressive-background{position:relative;width:100%;height:100%;overflow:hidden}.progressive-background-slot{position:relative;z-index:1}.progressive-background-canvas{visibility:hidden;position:absolute;top:0;left:0}.progressive-background-image{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1;transition:all .4s ease-out;background-position:center;background-repeat:no-repeat;background-size:cover}.progressive-background-placeholder{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1;transition:all .4s ease-out;background-position:center;background-repeat:no-repeat;background-size:cover;transform:scale(1.1);z-index:0}.progressive-background-before{opacity:1}.progressive-background-enter{opacity:0}.progressive-image-loader{pointer-events:none;position:absolute;top:0;left:0;width:100%;height:100%;z-index:2;display:flex;align-items:center;justify-content:center}")); document.head.appendChild(elementStyle);} catch(e) {console.error('vite-plugin-css-injected-by-js', e);} })();(function(i,c){typeof exports=="object"&&typeof module<"u"?c(exports):typeof define=="function"&&define.amd?define(["exports"],c):(i=typeof globalThis<"u"?globalThis:i||self,c(i.VueProgressiveImage={}))})(this,function(i){"use strict";const c=function(t){return typeof t<"u"&&t!==null},g={props:{src:{type:null,required:!0},placeholder:{type:String},blur:{type:Number},aspectRatio:{type:Number},noRatio:{type:Boolean},fallback:{type:String},alt:{type:String},customClass:{type:String}},data(){return{isRendered:!1,options:{cache:!0},defaultBlur:20,image:null,originalWidth:0,placeholderImage:null,aspectRatioDetect:.5625,isPollingKilled:!1,isImageCached:!1,imageError:!1}},watch:{src(){this.handleImageLoading()}},computed:{shouldPlaceholderRender(){return!!this.placeholderImage},shouldImageRender(){return this.isRendered},cached(){return this.options.cache&&this.isImageCached},calculatedRatio(){return this.aspectRatio||this.aspectRatioDetect},wrapperStyle(){return this.noRatio?{}:{paddingBottom:`${this.calculatedRatio*100}%`}},componentStyle(){return{maxWidth:this.originalWidth===0?"100%":`${this.originalWidth}px`}},blurStyle(){let t=this.defaultBlur;return c(this.blur)?this.getBlurStyle(this.blur):c(this.options.blur)?this.getBlurStyle(this.options.blur):this.getBlurStyle(t)}},mounted(){this.handleImageLoading()},methods:{getBlurStyle(t){if(t!==0)return{filter:`blur(${t}px)`}},defineAspectRatio(t){const e=this.options.timeout||2500,s=this.options.pollInterval||10,o=setInterval(()=>{if(!t.naturalWidth)return;clearInterval(o);const{naturalHeight:a,naturalWidth:d}=t;this.aspectRatioDetect=a/d,this.originalWidth=d},s);setTimeout(()=>{t.naturalWidth||(clearInterval(o),this.isPollingKilled=!0)},e)},isCached(t){const e=new Image;return e.src=t,e.complete},loadImage(){const t=new Image,e=this.options.delay||0,s=this.fallback||this.options.fallback,o=this.imageError?s:this.src;this.options.cache&&this.isCached(o)?(this.image=o,this.placeholderImage=null,this.isImageCached=!0):(this.image=null,this.isImageCached=!1,this.isRendered=!1),this.aspectRatio||this.defineAspectRatio(t),t.onload=()=>{if(this.image)return;this.isPollingKilled&&!this.aspectRatio&&this.defineAspectRatio(t),this.image=o;let a;try{a=this.$refs.canvas.getContext("2d"),a.drawImage(this.$refs.main,0,0)}catch{}this.$nextTick(()=>{setTimeout(()=>{this.isRendered=!0,this.placeholderImage=null},e)}),this.imageError=!1,this.$emit("onLoad",t.src)},t.onerror=a=>{this.$emit("onError",a),process.env.NODE_ENV!=="production"&&!this.fallback&&console.warn("[vue-progressive-image] An error occured during the image loading"),(this.fallback||this.options.fallback)&&(this.imageError=!0,this.handleImageLoading())},t.src=o},loadPlaceholder(){if(!this.placeholder&&!this.options.placeholder)return;const t=new Image,e=this.placeholder||this.options.placeholder;t.src=e,t.onload=()=>{this.placeholderImage=e,this.$emit("onLoadPlaceholder",e)},t.onerror=s=>{this.$emit("onPlaceholderError",s),process.env.NODE_ENV!=="production"&&console.warn("[vue-progressive-image] An error occured during the placeholder image loading")}},handleImageLoading(){this.loadPlaceholder(),this.loadImage()}}},T="";function h(t,e,s,o,a,d,f,P){var r=typeof t=="function"?t.options:t;e&&(r.render=e,r.staticRenderFns=s,r._compiled=!0),o&&(r.functional=!0),d&&(r._scopeId="data-v-"+d);var l;if(f?(l=function(n){n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!n&&typeof __VUE_SSR_CONTEXT__<"u"&&(n=__VUE_SSR_CONTEXT__),a&&a.call(this,n),n&&n._registeredComponents&&n._registeredComponents.add(f)},r._ssrRegister=l):a&&(l=P?function(){a.call(this,(r.functional?this.parent:this).$root.$options.shadowRoot)}:a),l)if(r.functional){r._injectStyles=l;var B=r.render;r.render=function(E,y){return l.call(y),B(E,y)}}else{var _=r.beforeCreate;r.beforeCreate=_?[].concat(_,l):[l]}return{exports:t,options:r}}const b={name:"progressive-img",props:{imageCustomClass:{type:String}},mixins:[g],computed:{placeholderStyle(){return{...this.blurStyle,"background-image":`url(${this.placeholder||this.options.placeholder})`}}}};var R=function(){var e=this,s=e._self._c;return s("div",{ref:"image",class:["progressive-image",e.customClass],style:e.componentStyle},[e.$slots.loader&&!e.shouldImageRender?s("div",{staticClass:"progressive-image-loader"},[e._t("loader")],2):e._e(),e.cached?s("div",{staticClass:"progressive-image-wrapper",style:e.wrapperStyle},[s("img",{class:["progressive-image-main",e.imageCustomClass],attrs:{src:e.image,alt:e.alt}})]):s("span",[e.shouldImageRender?e._e():s("canvas",{ref:"canvas",staticClass:"progressive-image-canvas",attrs:{width:"1",height:"1"}}),s("div",{staticClass:"progressive-image-wrapper",style:e.wrapperStyle},[s("transition",{attrs:{"enter-class":"progressive-image-enter","enter-active-class":"progressive-image-before-enter"}},[s("img",{directives:[{name:"show",rawName:"v-show",value:e.shouldImageRender,expression:"shouldImageRender"}],ref:"main",class:["progressive-image-main",e.imageCustomClass],attrs:{src:e.image,alt:e.alt}})]),s("transition",{attrs:{"enter-class":"progressive-image-enter","enter-active-class":"progressive-image-before-enter"}},[e.shouldPlaceholderRender?s("div",{staticClass:"progressive-image-placeholder",class:{"progressive-image-placeholder-out":e.shouldImageRender},style:e.placeholderStyle}):e._e()])],1)])])},I=[],C=h(b,R,I,!1,null,null,null,null);const u=C.exports,N="",S={name:"progressive-background",props:{noRatio:{type:Boolean,required:!1}},mixins:[g],data(){return{applyRatio:!this.noRatio}},computed:{imageStyle(){return{backgroundImage:`url(${this.image})`}},placeholderStyle(){return{...this.blurStyle,backgroundImage:`url(${this.placeholderImage})`}}}};var k=function(){var e=this,s=e._self._c;return s("div",{class:["progressive-background",e.customClass]},[e.cached?s("div",{style:e.wrapperStyle},[s("div",{staticClass:"progressive-background-image",style:e.imageStyle}),s("div",{staticClass:"progressive-background-slot"},[e._t("content")],2)]):s("span",[e.$slots.loader&&!e.shouldImageRender?s("div",{staticClass:"progressive-image-loader"},[e._t("loader")],2):e._e(),e.shouldImageRender?e._e():s("div",[s("canvas",{ref:"canvas",staticClass:"progressive-background-canvas",attrs:{width:"1",height:"1"}}),s("img",{ref:"main",attrs:{src:e.image,hidden:""}})]),s("div",{style:e.wrapperStyle},[s("transition",{attrs:{"enter-class":"progressive-background-enter","enter-active-class":"progressive-background-before"}},[e.shouldImageRender?s("div",{staticClass:"progressive-background-image",style:e.imageStyle}):e._e()]),s("div",{staticClass:"progressive-background-slot"},[e._t("content",null,{visible:!e.shouldImageRender})],2),s("transition",{attrs:{"enter-class":"progressive-background-enter","enter-active-class":"progressive-background-before"}},[e.shouldPlaceholderRender?s("div",{staticClass:"progressive-background-placeholder",style:e.placeholderStyle}):e._e()])],1)])])},$=[],w=h(S,k,$,!1,null,null,null,null);const p=w.exports,m=function(t,e={}){return{...t,data:()=>({options:e})}},v=function(t,e={}){t.component("progressive-img",m(u,e)),t.component("progressive-background",m(p,e))};i.ProgressiveBackground=p,i.ProgressiveImage=u,i.default=v,i.install=v,Object.defineProperties(i,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
