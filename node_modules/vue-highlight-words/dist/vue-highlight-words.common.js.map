{"version":3,"file":"vue-highlight-words.common.js","sources":["../src/VueHighlightWords.js","../src/index.js"],"sourcesContent":["import { findAll } from 'highlight-words-core'\n\nexport default {\n  functional: true,\n  props: {\n    activeClassName: String,\n    activeIndex: Number,\n    activeStyle: Object,\n    autoEscape: Boolean,\n    findChunks: Function,\n    highlightClassName: String,\n    highlightStyle: Object,\n    highlightTag: [Object, Function, String],\n    sanitize: Function,\n    searchWords: {\n      type: Array, // Array<string>\n      validator(value) {\n        return value.every(word => typeof word === 'string')\n      },\n      required: true\n    },\n    textToHighlight: {\n      type: String,\n      required: true\n    },\n    unhighlightClassName: String,\n    unhighlightStyle: Object\n  },\n  render(h, context) {\n    const {\n      activeClassName = '',\n      activeIndex = -1,\n      activeStyle,\n      autoEscape,\n      caseSensitive = false,\n      findChunks,\n      highlightClassName = '',\n      highlightStyle = {},\n      highlightTag = 'mark',\n      sanitize,\n      searchWords,\n      textToHighlight,\n      unhighlightClassName = '',\n      unhighlightStyle\n    } = context.props\n\n    const contextData = context.data\n\n    const chunks = findAll({\n      autoEscape,\n      caseSensitive,\n      findChunks,\n      sanitize,\n      searchWords,\n      textToHighlight\n    })\n\n    const HighlightTag = highlightTag\n    let highlightCount = -1\n    let highlightClassNames = ''\n    let highlightStyles\n\n    return h(\n      'span',\n      { ...contextData },\n      chunks.map((chunk, index) => {\n        const text = textToHighlight.substr(\n          chunk.start,\n          chunk.end - chunk.start\n        )\n\n        if (chunk.highlight) {\n          highlightCount++\n\n          const isActive = highlightCount === +activeIndex\n\n          highlightClassNames = `${highlightClassName} ${\n            isActive ? activeClassName : ''\n          }`\n          highlightStyles =\n            isActive === true && activeStyle != null\n              ? Object.assign({}, highlightStyle, activeStyle)\n              : highlightStyle\n\n          const data = {\n            class: highlightClassNames,\n            key: index,\n            style: highlightStyles\n          }\n\n          if (typeof HighlightTag !== 'string') {\n            // not plain html tag, add props for compoent\n            data.props = {\n              highlightIndex: highlightCount\n            }\n          }\n\n          if (contextData.scopedSlots) {\n            return h(HighlightTag, data, [\n              contextData.scopedSlots.default({\n                children: text,\n                highlightIndex: highlightCount\n              })\n            ])\n          }\n\n          return h(HighlightTag, data, text)\n        } else {\n          return h(\n            'span',\n            {\n              class: unhighlightClassName,\n              key: index,\n              style: unhighlightStyle\n            },\n            text\n          )\n        }\n      })\n    )\n  }\n}\n","import VueHighlightWords from './VueHighlightWords'\n\nfunction install(Vue, options = {}) {\n  Vue.component(options.name || 'VueHighlightWords', VueHighlightWords)\n}\n\nif (process.env.ROLLUP_BUILD_MODE === 'umd') {\n  let GlobalVue = null\n  if (typeof window !== 'undefined') {\n    GlobalVue = window.Vue\n  } else if (typeof global !== 'undefined') {\n    GlobalVue = global.Vue\n  }\n  if (GlobalVue) {\n    GlobalVue.use({ install })\n  }\n}\n\nexport default VueHighlightWords\nexport { install, VueHighlightWords }\n"],"names":["functional","props","activeClassName","String","activeIndex","Number","activeStyle","Object","autoEscape","Boolean","findChunks","Function","highlightClassName","highlightStyle","highlightTag","sanitize","searchWords","type","Array","validator","value","every","word","required","textToHighlight","unhighlightClassName","unhighlightStyle","render","h","context","caseSensitive","contextData","data","chunks","findAll","HighlightTag","highlightCount","highlightClassNames","highlightStyles","map","chunk","index","text","substr","start","end","highlight","isActive","assign","class","key","style","highlightIndex","scopedSlots","default","children","install","Vue","options","component","name","VueHighlightWords"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,wBAAe;EACbA,UAAU,EAAE,IADC;EAEbC,KAAK,EAAE;IACLC,eAAe,EAAEC,MADZ;IAELC,WAAW,EAAEC,MAFR;IAGLC,WAAW,EAAEC,MAHR;IAILC,UAAU,EAAEC,OAJP;IAKLC,UAAU,EAAEC,QALP;IAMLC,kBAAkB,EAAET,MANf;IAOLU,cAAc,EAAEN,MAPX;IAQLO,YAAY,EAAE,CAACP,MAAD,EAASI,QAAT,EAAmBR,MAAnB,CART;IASLY,QAAQ,EAAEJ,QATL;IAULK,WAAW,EAAE;MACXC,IAAI,EAAEC,KADK;;MAEXC,SAFW,qBAEDC,KAFC,EAEM;eACRA,KAAK,CAACC,KAAN,CAAY,UAAAC,IAAI;iBAAI,OAAOA,IAAP,KAAgB,QAApB;SAAhB,CAAP;OAHS;MAKXC,QAAQ,EAAE;KAfP;IAiBLC,eAAe,EAAE;MACfP,IAAI,EAAEd,MADS;MAEfoB,QAAQ,EAAE;KAnBP;IAqBLE,oBAAoB,EAAEtB,MArBjB;IAsBLuB,gBAAgB,EAAEnB;GAxBP;EA0BboB,MA1Ba,kBA0BNC,CA1BM,EA0BHC,OA1BG,EA0BM;yBAgBbA,OAAO,CAAC5B,KAhBK;+CAEfC,eAFe;QAEfA,eAFe,sCAEG,EAFH;gDAGfE,WAHe;QAGfA,WAHe,uCAGD,CAAC,CAHA;QAIfE,WAJe,kBAIfA,WAJe;QAKfE,UALe,kBAKfA,UALe;+CAMfsB,aANe;QAMfA,aANe,sCAMC,KAND;QAOfpB,UAPe,kBAOfA,UAPe;+CAQfE,kBARe;QAQfA,kBARe,sCAQM,EARN;gDASfC,cATe;QASfA,cATe,uCASE,EATF;gDAUfC,YAVe;QAUfA,YAVe,uCAUA,MAVA;QAWfC,QAXe,kBAWfA,QAXe;QAYfC,WAZe,kBAYfA,WAZe;QAafQ,eAbe,kBAafA,eAbe;+CAcfC,oBAde;QAcfA,oBAde,sCAcQ,EAdR;QAefC,gBAfe,kBAefA,gBAfe;QAkBXK,WAAW,GAAGF,OAAO,CAACG,IAA5B;QAEMC,MAAM,GAAGC,0BAAO,CAAC;MACrB1B,UAAU,EAAVA,UADqB;MAErBsB,aAAa,EAAbA,aAFqB;MAGrBpB,UAAU,EAAVA,UAHqB;MAIrBK,QAAQ,EAARA,QAJqB;MAKrBC,WAAW,EAAXA,WALqB;MAMrBQ,eAAe,EAAfA;KANoB,CAAtB;QASMW,YAAY,GAAGrB,YAArB;QACIsB,cAAc,GAAG,CAAC,CAAtB;QACIC,mBAAmB,GAAG,EAA1B;QACIC,eAAJ;WAEOV,CAAC,CACN,MADM,oBAEDG,WAFC,GAGNE,MAAM,CAACM,GAAP,CAAW,UAACC,KAAD,EAAQC,KAAR,EAAkB;UACrBC,IAAI,GAAGlB,eAAe,CAACmB,MAAhB,CACXH,KAAK,CAACI,KADK,EAEXJ,KAAK,CAACK,GAAN,GAAYL,KAAK,CAACI,KAFP,CAAb;;UAKIJ,KAAK,CAACM,SAAV,EAAqB;QACnBV,cAAc;YAERW,QAAQ,GAAGX,cAAc,KAAK,CAAChC,WAArC;QAEAiC,mBAAmB,aAAMzB,kBAAN,cACjBmC,QAAQ,GAAG7C,eAAH,GAAqB,EADZ,CAAnB;QAGAoC,eAAe,GACbS,QAAQ,KAAK,IAAb,IAAqBzC,WAAW,IAAI,IAApC,GACIC,MAAM,CAACyC,MAAP,CAAc,EAAd,EAAkBnC,cAAlB,EAAkCP,WAAlC,CADJ,GAEIO,cAHN;YAKMmB,IAAI,GAAG;UACXiB,KAAK,EAAEZ,mBADI;UAEXa,GAAG,EAAET,KAFM;UAGXU,KAAK,EAAEb;SAHT;;YAMI,OAAOH,YAAP,KAAwB,QAA5B,EAAsC;;UAEpCH,IAAI,CAAC/B,KAAL,GAAa;YACXmD,cAAc,EAAEhB;WADlB;;;YAKEL,WAAW,CAACsB,WAAhB,EAA6B;iBACpBzB,CAAC,CAACO,YAAD,EAAeH,IAAf,EAAqB,CAC3BD,WAAW,CAACsB,WAAZ,CAAwBC,OAAxB,CAAgC;YAC9BC,QAAQ,EAAEb,IADoB;YAE9BU,cAAc,EAAEhB;WAFlB,CAD2B,CAArB,CAAR;;;eAQKR,CAAC,CAACO,YAAD,EAAeH,IAAf,EAAqBU,IAArB,CAAR;OAnCF,MAoCO;eACEd,CAAC,CACN,MADM,EAEN;UACEqB,KAAK,EAAExB,oBADT;UAEEyB,GAAG,EAAET,KAFP;UAGEU,KAAK,EAAEzB;SALH,EAONgB,IAPM,CAAR;;KA3CJ,CAHM,CAAR;;CA5DJ;;ACAA,SAASc,OAAT,CAAiBC,GAAjB,EAAoC;MAAdC,OAAc,uEAAJ,EAAI;EAClCD,GAAG,CAACE,SAAJ,CAAcD,OAAO,CAACE,IAAR,IAAgB,mBAA9B,EAAmDC,iBAAnD;;;;;;;"}